'''
40 30 30 50
eg. 
((40 @ 30) @ 30) @ 50 = (40+30) + (40+30+30) + (40+30+30+50)
(40 @ 30) @ (30 @ 50) = (40+30) @ (30+50) =  (40+30) + (40+30+30+50) + (30+50)
(40 @ (30 @ 30)) @ 50 = (40 @ (30+30)) @ 50 = (40 + (30+30)) + (40 + (30+30)) + 50

gap = 2 ~ n+1:
    i = 0 ~ n-gap+1:
        j = i + gap - 1
        dp[i][j] init. set to inf
        k = i ~ j:

'''
test_case = 2
n = 6
files = [1, 21, 3 ,4, 5 ,35]
dp = [[0 for _ in range(n)] for _ in range(n)]
inf = 999

print(f"files : {files}")
for gap in range(2, n+1):
    for i in range(n-gap+1):
        j = i + gap-1
        dp[i][j] = inf
        for k in range(i, j):
            cost = dp[i][k] + dp[k+1][j] + sum(files[i:j+1])
            dp[i][j] = min(dp[i][j], cost)
            print(f"({gap}, {i}, {j}, {k})\n{dp}\ndp[i][j]={dp[i][j]}, cost={dp[i][k]}+{dp[k+1][j]}+{sum(files[i:j+1])}={cost}")

'''
files : [40, 30, 30, 50]
dp[i][k] + dp[k+1][j] + sum(files[i:j+1])
(2, 0, 1, 0)
[[0, 70, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
dp[i][j]=70, cost=0+0+70=70
(2, 1, 2, 1)
[[0, 70, 0, 0], [0, 0, 60, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
dp[i][j]=60, cost=0+0+60=60
(2, 2, 3, 2)
[[0, 70, 0, 0], [0, 0, 60, 0], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=80, cost=0+0+80=80

(3, 0, 2, 0)
[[0, 70, 160, 0], [0, 0, 60, 0], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=160, cost=0+60+100=160
(3, 0, 2, 1)
[[0, 70, 160, 0], [0, 0, 60, 0], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=160, cost=70+0+100=170
(3, 1, 3, 1)
[[0, 70, 160, 0], [0, 0, 60, 190], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=190, cost=0+80+110=190
(3, 1, 3, 2)
[[0, 70, 160, 0], [0, 0, 60, 170], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=170, cost=60+0+110=170

(4, 0, 3, 0)
[[0, 70, 160, 320], [0, 0, 60, 170], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=320, cost=0+170+150=320
(4, 0, 3, 1)
[[0, 70, 160, 300], [0, 0, 60, 170], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=300, cost=70+80+150=300
(4, 0, 3, 2)
[[0, 70, 160, 300], [0, 0, 60, 170], [0, 0, 0, 80], [0, 0, 0, 0]]
dp[i][j]=300, cost=160+0+150=310
'''


'''
files : [1, 21, 3, 4, 5, 35]
(2, 0, 1, 0)
[[0, 22, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]
dp[i][j]=22, cost=0+0+22=22
(2, 1, 2, 1)
[[0, 22, 0, 0, 0, 0], [0, 0, 24, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]
dp[i][j]=24, cost=0+0+24=24
(2, 2, 3, 2)
[[0, 22, 0, 0, 0, 0], [0, 0, 24, 0, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]
dp[i][j]=7, cost=0+0+7=7
(2, 3, 4, 3)
[[0, 22, 0, 0, 0, 0], [0, 0, 24, 0, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]
dp[i][j]=9, cost=0+0+9=9
(2, 4, 5, 4)
[[0, 22, 0, 0, 0, 0], [0, 0, 24, 0, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=40, cost=0+0+40=40

(3, 0, 2, 0)
[[0, 22, 49, 0, 0, 0], [0, 0, 24, 0, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=49, cost=0+24+25=49
(3, 0, 2, 1)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 0, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=47, cost=22+0+25=47
(3, 1, 3, 1)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=35, cost=0+7+28=35
(3, 1, 3, 2)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=35, cost=24+0+28=52
(3, 2, 4, 2)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 21, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=21, cost=0+9+12=21
(3, 2, 4, 3)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 0], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=19, cost=7+0+12=19
(3, 3, 5, 3)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 84], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=84, cost=0+40+44=84
(3, 3, 5, 4)
[[0, 22, 47, 0, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=53, cost=9+0+44=53

(4, 0, 3, 0)
[[0, 22, 47, 64, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=64, cost=0+35+29=64
(4, 0, 3, 1)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=58, cost=22+7+29=58
(4, 0, 3, 2)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 0, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=58, cost=47+0+29=76
(4, 1, 4, 1)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=52, cost=0+19+33=52
(4, 1, 4, 2)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=52, cost=24+9+33=66
(4, 1, 4, 3)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 0], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=52, cost=35+0+33=68
(4, 2, 5, 2)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 100], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=100, cost=0+53+47=100
(4, 2, 5, 3)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 94], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=94, cost=7+40+47=94
(4, 2, 5, 4)
[[0, 22, 47, 58, 0, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=66, cost=19+0+47=66

(5, 0, 4, 0)
[[0, 22, 47, 58, 86, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=86, cost=0+52+34=86
(5, 0, 4, 1)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=75, cost=22+19+34=75
(5, 0, 4, 2)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=75, cost=47+9+34=90
(5, 0, 4, 3)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 0], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=75, cost=58+0+34=92
(5, 1, 5, 1)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 134], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=134, cost=0+66+68=134
(5, 1, 5, 2)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 134], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=134, cost=24+53+68=145
(5, 1, 5, 3)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 134], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=134, cost=35+40+68=143
(5, 1, 5, 4)
[[0, 22, 47, 58, 75, 0], [0, 0, 24, 35, 52, 120], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=120, cost=52+0+68=120
(6, 0, 5, 0)
[[0, 22, 47, 58, 75, 189], [0, 0, 24, 35, 52, 120], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=189, cost=0+120+69=189
(6, 0, 5, 1)
[[0, 22, 47, 58, 75, 157], [0, 0, 24, 35, 52, 120], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=157, cost=22+66+69=157
(6, 0, 5, 2)
[[0, 22, 47, 58, 75, 157], [0, 0, 24, 35, 52, 120], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=157, cost=47+53+69=169
(6, 0, 5, 3)
[[0, 22, 47, 58, 75, 157], [0, 0, 24, 35, 52, 120], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=157, cost=58+40+69=167
(6, 0, 5, 4)
[[0, 22, 47, 58, 75, 144], [0, 0, 24, 35, 52, 120], [0, 0, 0, 7, 19, 66], [0, 0, 0, 0, 9, 53], [0, 0, 0, 0, 0, 40], [0, 0, 0, 0, 0, 0]]
dp[i][j]=144, cost=75+0+69=144
'''